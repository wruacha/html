<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Love üíñ</title>

<!-- Valentine Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    text-align: center;
    overflow: hidden;
    font-family: 'Dancing Script', cursive;
}

.hidden { display: none; }

/* ---------- INTRO & LOADING ---------- */
.intro-text, .loading-text {
    font-family: 'Great Vibes', cursive;
    font-size: 44px;
    line-height: 1.4;
    padding: 20px;
    min-height: 170px;
    color: black;
}

button {
    margin-top: 25px;
    padding: 14px 34px;
    font-size: 22px;
    border-radius: 30px;
    border: none;
    background: #e63946;
    color: white;
    cursor: pointer;
    font-family: 'Dancing Script', cursive;
    transition: transform 0.2s;
}

button:hover {
    transform: scale(1.05);
}

/* FINAL IMAGE ANIMATION */
#finalImg {
    width: 250px;
    border-radius: 15px;
    margin-top: 20px;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 1s ease, transform 1s ease;
}

#finalImg.show {
    opacity: 1;
    transform: translateY(0);
}

.loader {
    width: 70%;
    height: 8px;
    background: rgba(255,255,255,.3);
    border-radius: 10px;
    margin: 30px auto;
    overflow: hidden;
}

.loader span {
    display: block;
    height: 100%;
    width: 0;
    background: white;
    animation: load 3s forwards;
}

@keyframes load { to { width: 100%; } }

/* ---------- GAME ---------- */
.game {
    background: white;
    color: #444;
    width: 95%;
    max-width: 420px;
    padding: 20px;
    border-radius: 22px;
    box-shadow: 0 15px 30px rgba(0,0,0,.25);
    animation: fadeIn 1s;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

h1 {
    color: #1b1b1b;
    font-family: 'Great Vibes', cursive;
    font-size: 36px;
}

.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin: 15px 0;
}

.grid img {
    width: 100%;
    height: 120px;
    border-radius: 14px;
    object-fit: cover;
}

.answer {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin: 15px 0;
}

.answer div {
    width: 36px;
    height: 42px;
    border-bottom: 3px solid #e63946;
    font-size: 24px;
    font-weight: bold;
    line-height: 42px;
    font-family: 'Dancing Script', cursive;
}

.letters {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
}

.letter {
    width: 42px;
    height: 42px;
    background: #e63946;
    color: white;
    font-size: 20px;
    font-weight: bold;
    border-radius: 10px;
    line-height: 42px;
    cursor: pointer;
    font-family: 'Dancing Script', cursive;
}

.typing {
    margin-top: 15px;
    min-height: 70px;
    font-size: 20px;
}

.final {
    font-size: 28px;
    color: #e63946;
    font-weight: bold;
    margin-top: 25px;
    font-family: 'Great Vibes', cursive;
}
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
    <div id="introText" class="intro-text"></div>
    <button id="startBtn" class="hidden" onclick="goToLoading()">Begin üíï</button>
</div>

<!-- LOADING -->
<div id="loading" class="hidden">
    <div class="loading-text">Preparing something special for you‚Ä¶</div>
    <div class="loader"><span></span></div>
    <!-- Updated onclick -->
    <button onclick="showButFirstMsg()">Continue ‚ù§Ô∏è</button>
</div>
<!-- "BUT FIRST" MESSAGE PAGE -->
<div id="butFirstMsg" class="hidden">
  <div id="butFirstText" class="intro-text"></div>
  <img id="butFirstImg" src="cat.png" alt="Cute Image" 
       style="width:250px; border-radius:15px; margin-top:20px; opacity:0; transform:translateY(30px); transition: all 1s ease;">
</div>


<!-- PUZZLE 1 -->
<div id="p1" class="game hidden">
<h1>It comes to my mind every time I look at you</h1>
<div class="grid">
<img src="p1_1.jpg"><img src="p1_2.jpg">
<img src="p1_3.jpg"><img src="p1_4.jpg">
</div>
<div class="answer" id="a1"></div>
<div class="letters" id="l1"></div>
<button id="c1" class="hidden" onclick="next('p1','p2')">Continue ‚ù§Ô∏è</button>
</div>

<!-- PUZZLE 2 -->
<div id="p2" class="game hidden">
<h1>Another One</h1>
<div class="grid">
<img src="p2_1.jpg"><img src="p2_2.jpg">
<img src="p2_3.jpg"><img src="p2_4.jpg">
</div>
<div class="answer" id="a2"></div>
<div class="letters" id="l2"></div>
<div id="t2" class="typing hidden"></div>
<button id="c2" class="hidden" onclick="next('p2','p3')">Continue ‚ù§Ô∏è</button>
</div>

<!-- SWEET MESSAGE AFTER MYWIFE -->
<div id="sweetMsg" class="hidden">
  <div id="msgText" class="intro-text"></div>
  <button id="msgBtn" class="hidden" onclick="next('sweetMsg','p3')">Continue ‚ù§Ô∏è</button>
</div>

<!-- PUZZLE 3 -->
<div id="p3" class="game hidden">
<h1>Almost There</h1>
<div class="grid">
<img src="p3_1.jpg"><img src="p3_2.jpg">
<img src="p3_3.jpg"><img src="p3_4.jpg">
</div>
<div class="answer" id="a3"></div>
<div class="letters" id="l3"></div>
<button id="c3" class="hidden" onclick="showFinalPage()">Continue ‚ù§Ô∏è</button>
</div>

<!-- FINAL SWEET PAGE -->
<div id="finalPage" class="hidden" style="color:black; text-align:center;">
  <div id="finalText" class="intro-text"></div>
  <div id="finalQ2" class="final hidden" style="margin-top:20px;">
    Will you be my Valentine Date, my wife?? üíò
  </div>
  <img id="finalImg" src="cat.png" alt="Love Image">
  <button id="finalBtn" class="hidden" onclick="showFinalQuestion()">Continue üíï</button>
</div>

<script>
function typeText(el, text, speed, done) {
    let i = 0;
    const t = setInterval(() => {
        el.textContent += text[i];
        i++;
        if (i === text.length) {
            clearInterval(t);
            if (done) done();
        }
    }, speed);
}

// Intro typing
typeText(
    introText,
    "Something special, just for you.\nA little game made with love.",
    60,
    () => startBtn.classList.remove("hidden")
);

function goToLoading() {
    intro.classList.add("hidden");
    loading.classList.remove("hidden");
}

function startGame() {
    loading.classList.add("hidden");
    p1.classList.remove("hidden");
}

function next(from,to){
    document.getElementById(from).classList.add("hidden");
    document.getElementById(to).classList.remove("hidden");
}

function setupPuzzle(answer,aBox,lBox,done){
    const a=document.getElementById(aBox);
    const l=document.getElementById(lBox);
    let cur=new Array(answer.length).fill(null); // track letters
    answer.split("").forEach(()=>a.appendChild(document.createElement("div")));

    const shuffled=answer.split("").sort(()=>Math.random()-0.5);
    shuffled.forEach(ch=>{
        const b=document.createElement("div");
        b.className="letter";
        b.textContent=ch;
        l.appendChild(b);

        b.onclick=()=>{
            const emptyIndex=cur.indexOf(null);
            if(emptyIndex!==-1){
                cur[emptyIndex]=b;
                a.children[emptyIndex].textContent=b.textContent;
                b.style.visibility="hidden";
                if(cur.every(x=>x)) done();
            }
        };
    });

    Array.from(a.children).forEach((box,i)=>{
        box.onclick=()=>{
            if(cur[i]){
                cur[i].style.visibility="visible";
                cur[i]=null;
                box.textContent="";
            }
        };
    });
}

// Setup puzzles
setupPuzzle("GORGEOUS","a1","l1",()=>c1.classList.remove("hidden"));
setupPuzzle("MYWIFE","a2","l2",()=>{
    p2.classList.add("hidden");
    sweetMsg.classList.remove("hidden");
    typeText(msgText,
        "Even miles apart, my heart never left you. Loving you from a distance only made us stronger. You are my everything, my love.",
        40,
        ()=> msgBtn.classList.remove("hidden")
    );
});
setupPuzzle("VALENTINE","a3","l3",()=>c3.classList.remove("hidden"));

// FINAL PAGE
function showFinalPage() {
    p3.classList.add("hidden");
    finalPage.classList.remove("hidden");

    typeText(finalText,
        "You are the light of my life, my partner in every dream, every laugh, and every heartbeat. I can‚Äôt wait to create even more beautiful memories with you.",
        40,
        () => finalBtn.classList.remove("hidden")
    );
}

function showFinalQuestion() {
    finalQ2.classList.remove("hidden"); 
    finalBtn.classList.add("hidden");

    setTimeout(() => {
        finalImg.classList.add("show");
    }, 300);
}


function showButFirstMsg() {
    loading.classList.add("hidden");         // hide loading page
    butFirstMsg.classList.remove("hidden");  // show "but first" page

    typeText(butFirstText, "But first, I have a question for you‚Ä¶ hmm‚Ä¶", 40, () => {
        // Fade in the image
        butFirstImg.style.opacity = 1;
        butFirstImg.style.transform = "translateY(0)";
        // Automatically proceed to Puzzle 1 after 1 second
        setTimeout(() => {
            next('butFirstMsg','p1');
        }, 3000); 
    });
}

</script>
</body>
</html>

